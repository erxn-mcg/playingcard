<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>A Little Deck for You ♥</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400;1,600&family=IM+Fell+English:ital@0;1&display=swap');

    :root {
      --deep-plum: #2d1b3d;
      --midnight: #1a0f2e;
      --gold: #c9a84c;
      --gold-light: #e8c96a;
      --gold-pale: #f5e6b8;
      --rose: #c0546e;
      --rose-light: #e8758a;
      --cream: #fdf6e9;
      --silk-blue: #1e3a5f;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: var(--midnight);
      background-image:
        radial-gradient(ellipse at 20% 20%, rgba(45,27,61,0.8) 0%, transparent 60%),
        radial-gradient(ellipse at 80% 80%, rgba(30,58,95,0.6) 0%, transparent 60%),
        url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23c9a84c' fill-opacity='0.04'%3E%3Cpath d='M30 30 L35 25 L30 20 L25 25 Z M30 30 L35 35 L30 40 L25 35 Z M30 30 L20 25 L15 30 L20 35 Z M30 30 L40 25 L45 30 L40 35 Z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      font-family: 'Cormorant Garamond', serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px 60px;
      overflow-x: hidden;
    }

    /* ─── Header ─── */
    .header {
      text-align: center;
      margin-bottom: 50px;
    }

    .header h1 {
      font-family: 'IM Fell English', serif;
      font-size: clamp(2rem, 5vw, 3.2rem);
      color: var(--gold-light);
      letter-spacing: 0.05em;
      text-shadow: 0 0 30px rgba(201,168,76,0.4);
      margin-bottom: 8px;
    }

    .header p {
      font-size: 1.1rem;
      color: rgba(245,230,184,0.6);
      font-style: italic;
      letter-spacing: 0.08em;
    }

    .ornament {
      color: var(--gold);
      font-size: 1.4rem;
      letter-spacing: 0.3em;
      margin: 10px 0;
      opacity: 0.7;
    }

    /* ─── Shuffle Button ─── */
    .shuffle-btn {
      position: relative;
      background: transparent;
      border: 2px solid var(--gold);
      color: var(--gold-light);
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.1rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      padding: 14px 40px;
      cursor: pointer;
      margin-bottom: 50px;
      transition: all 0.3s ease;
      overflow: hidden;
    }

    .shuffle-btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, transparent 40%, rgba(201,168,76,0.1) 50%, transparent 60%);
      transform: translateX(-100%);
      transition: transform 0.5s ease;
    }

    .shuffle-btn:hover::before {
      transform: translateX(100%);
    }

    .shuffle-btn:hover {
      background: rgba(201,168,76,0.1);
      box-shadow: 0 0 20px rgba(201,168,76,0.3), inset 0 0 20px rgba(201,168,76,0.05);
      color: var(--gold-pale);
    }

    .shuffle-btn .corner-tl,
    .shuffle-btn .corner-tr,
    .shuffle-btn .corner-bl,
    .shuffle-btn .corner-br {
      position: absolute;
      width: 8px;
      height: 8px;
      border-color: var(--gold);
      border-style: solid;
      opacity: 0.6;
    }
    .shuffle-btn .corner-tl { top: 4px; left: 4px; border-width: 1px 0 0 1px; }
    .shuffle-btn .corner-tr { top: 4px; right: 4px; border-width: 1px 1px 0 0; }
    .shuffle-btn .corner-bl { bottom: 4px; left: 4px; border-width: 0 0 1px 1px; }
    .shuffle-btn .corner-br { bottom: 4px; right: 4px; border-width: 0 1px 1px 0; }

    .shuffle-btn.animating {
      animation: shufflePulse 0.5s ease;
    }

    @keyframes shufflePulse {
      0%   { transform: scale(1); }
      50%  { transform: scale(0.96); box-shadow: 0 0 40px rgba(201,168,76,0.5); }
      100% { transform: scale(1); }
    }

    /* ─── Deck Area ─── */
    .deck-area {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 40px;
      width: 100%;
      max-width: 900px;
    }

    .deck-label {
      font-size: 0.85rem;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: rgba(201,168,76,0.5);
    }

    /* ─── Card Stack ─── */
    .deck-stack {
      position: relative;
      width: 140px;
      height: 196px;
      cursor: pointer;
      margin-bottom: 10px;
    }

    .deck-stack:hover .stack-card:last-child {
      transform: translateY(-8px);
      box-shadow: 0 20px 50px rgba(0,0,0,0.6), 0 0 30px rgba(201,168,76,0.2);
    }

    .stack-card {
      position: absolute;
      width: 140px;
      height: 196px;
      border-radius: 10px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .stack-card:nth-child(1) { transform: rotate(-3deg) translate(-3px, 3px); }
    .stack-card:nth-child(2) { transform: rotate(-1.5deg) translate(-1px, 1.5px); }
    .stack-card:nth-child(3) { transform: rotate(0deg); }

    /* ─── Card Back Design (Silk Embroidery) ─── */
    .card-back {
      background: var(--deep-plum);
      border: 2px solid var(--gold);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0,0,0,0.5);
    }

    .card-back svg {
      width: 100%;
      height: 100%;
    }

    /* ─── Cards Grid ─── */
    .cards-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      width: 100%;
    }

    /* ─── Individual Card ─── */
    .card-scene {
      width: 160px;
      height: 224px;
      perspective: 800px;
    }

    .card-flip {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }

    .card-flip.flipped {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      inset: 0;
      backface-visibility: hidden;
      border-radius: 12px;
      overflow: hidden;
    }

    /* Card Back Face */
    .card-face.back {
      background: var(--deep-plum);
      border: 2px solid var(--gold);
      box-shadow: 0 8px 25px rgba(0,0,0,0.5);
    }

    .card-face.back svg {
      width: 100%;
      height: 100%;
    }

    /* Card Front Face */
    .card-face.front {
      transform: rotateY(180deg);
      background: var(--cream);
      border: 2px solid var(--gold);
      box-shadow: 0 8px 25px rgba(0,0,0,0.5), 0 0 30px rgba(201,168,76,0.15);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 16px;
      text-align: center;
    }

    .card-suit {
      font-size: 2rem;
      line-height: 1;
      margin-bottom: 8px;
    }

    .card-message {
      font-family: 'Cormorant Garamond', serif;
      font-size: 0.82rem;
      line-height: 1.55;
      color: #3a2040;
      font-style: italic;
    }

    .card-number {
      position: absolute;
      font-size: 0.75rem;
      font-weight: 600;
      color: #8a5070;
      letter-spacing: 0.05em;
    }
    .card-number.top-left { top: 8px; left: 10px; }
    .card-number.bottom-right { bottom: 8px; right: 10px; transform: rotate(180deg); }

    /* Front border decoration */
    .card-face.front::before {
      content: '';
      position: absolute;
      inset: 6px;
      border: 1px solid rgba(201,168,76,0.3);
      border-radius: 8px;
      pointer-events: none;
    }

    /* ─── Reveal Animation ─── */
    .card-scene.deal-in {
      animation: dealIn 0.5s cubic-bezier(0.2, 0.8, 0.3, 1) both;
    }

    @keyframes dealIn {
      from { opacity: 0; transform: scale(0.7) translateY(30px); }
      to   { opacity: 1; transform: scale(1) translateY(0); }
    }

    /* ─── Instruction text ─── */
    .instruction {
      font-size: 0.85rem;
      color: rgba(245,230,184,0.4);
      letter-spacing: 0.15em;
      text-align: center;
      font-style: italic;
      margin-top: -20px;
    }

    /* ─── Footer ─── */
    .footer {
      margin-top: 60px;
      text-align: center;
      color: rgba(201,168,76,0.35);
      font-size: 0.8rem;
      letter-spacing: 0.2em;
    }

    /* Hover lift for unflipped cards */
    .card-scene:not(.is-flipped):hover .card-flip {
      transform: translateY(-6px);
    }
    .card-scene.is-flipped .card-flip.flipped {
      /* already flipped, keep it stable */
    }
  </style>
</head>
<body>

  <header class="header">
    <div class="ornament">✦ ✦ ✦</div>
    <h1>A Little Deck for You</h1>
    <p>shuffle &amp; draw a card, my love</p>
    <div class="ornament">✦ ✦ ✦</div>
  </header>

  <button class="shuffle-btn" id="shuffleBtn" onclick="shuffle()">
    <span class="corner-tl"></span>
    <span class="corner-tr"></span>
    <span class="corner-bl"></span>
    <span class="corner-br"></span>
    ✦ Shuffle ✦
  </button>

  <div class="deck-area">
    <div class="deck-stack" id="deckStack" onclick="dealCard()">
      <!-- Three stacked cards rendered by JS -->
    </div>
    <p class="deck-label" id="deckLabel">click the deck to draw</p>

    <div class="cards-grid" id="cardsGrid"></div>
    <p class="instruction" id="instruction" style="display:none">tap a card to read your message</p>
  </div>

  <footer class="footer">
    <div class="ornament" style="font-size:1rem">♥ ♦ ♣ ♠</div>
    <p style="margin-top:6px">made with love, just for you</p>
  </footer>

<script>
// ─── Messages ────────────────────────────────────────────────────────────────
const messages = [
  { suit: '♥', label: 'A♥', color: '#b03060', message: 'You are the first thought I have every morning and the last one every night.' },
  { suit: '♦', label: '2♦', color: '#b03060', message: 'Being with you feels like finding a place I never knew I was looking for.' },
  { suit: '♥', label: '3♥', color: '#b03060', message: 'I love the way you laugh at your own jokes before you even finish telling them.' },
  { suit: '♣', label: '4♣', color: '#2d1b3d', message: 'You make ordinary Tuesdays feel like something worth remembering.' },
  { suit: '♠', label: '5♠', color: '#2d1b3d', message: 'Choosing you, every day, is the easiest thing I have ever done.' },
  { suit: '♥', label: '6♥', color: '#b03060', message: 'The world is softer and stranger and better because you are in it.' },
  { suit: '♦', label: '7♦', color: '#b03060', message: 'I would travel any distance just to sit quietly next to you.' },
  { suit: '♣', label: '8♣', color: '#2d1b3d', message: 'You are my favourite person to do absolutely nothing with.' },
  { suit: '♠', label: '9♠', color: '#2d1b3d', message: 'Every version of my future I can imagine has you in it.' },
  { suit: '♥', label: '10♥', color: '#b03060', message: 'You hold my heart with such gentleness — I hope you know that.' },
  { suit: '♦', label: 'J♦', color: '#b03060', message: 'I notice how kind you are to strangers, and I fall for you again each time.' },
  { suit: '♣', label: 'Q♣', color: '#2d1b3d', message: 'Thank you for seeing me — all of me — and staying anyway.' },
  { suit: '♠', label: 'K♠', color: '#2d1b3d', message: 'You are my home, my favourite adventure, my most treasured thing.' },
];

let deck = [];
let dealtCards = [];

// ─── SVG Card Back (Silk Embroidery Style) ───────────────────────────────────
function cardBackSVG(size = 160) {
  const w = size, h = Math.round(size * 1.4);
  return `<svg viewBox="0 0 ${w} ${h}" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <radialGradient id="bg" cx="50%" cy="50%" r="60%">
        <stop offset="0%" stop-color="#3d2255"/>
        <stop offset="100%" stop-color="#1e1030"/>
      </radialGradient>
      <pattern id="diamond" width="14" height="14" patternUnits="userSpaceOnUse">
        <polygon points="7,1 13,7 7,13 1,7" fill="none" stroke="#c9a84c" stroke-width="0.4" opacity="0.3"/>
      </pattern>
    </defs>
    <!-- Background -->
    <rect width="${w}" height="${h}" fill="url(#bg)"/>
    <!-- Diamond lattice -->
    <rect width="${w}" height="${h}" fill="url(#diamond)"/>
    <!-- Outer border frame -->
    <rect x="6" y="6" width="${w-12}" height="${h-12}" fill="none" stroke="#c9a84c" stroke-width="1.2" opacity="0.6" rx="4"/>
    <rect x="10" y="10" width="${w-20}" height="${h-20}" fill="none" stroke="#c9a84c" stroke-width="0.5" opacity="0.35" rx="2"/>
    <!-- Centre medallion -->
    ${embroideryMedallion(w/2, h/2, Math.min(w,h)*0.28)}
    <!-- Corner florals -->
    ${cornerFloral(18, 18, 10)}
    ${cornerFloral(w-18, 18, 10, true)}
    ${cornerFloral(18, h-18, 10, false, true)}
    ${cornerFloral(w-18, h-18, 10, true, true)}
  </svg>`;
}

function embroideryMedallion(cx, cy, r) {
  const petals = 8;
  let paths = '';
  // Outer ring petals
  for (let i = 0; i < petals; i++) {
    const a = (i / petals) * Math.PI * 2;
    const a2 = a + Math.PI / petals;
    const px = cx + Math.cos(a) * r;
    const py = cy + Math.sin(a) * r;
    const cp1x = cx + Math.cos(a) * r * 0.5 + Math.cos(a2) * r * 0.4;
    const cp1y = cy + Math.sin(a) * r * 0.5 + Math.sin(a2) * r * 0.4;
    paths += `<path d="M${cx},${cy} Q${cp1x},${cp1y} ${px},${py} Q${cp1x - (Math.cos(a2)*r*0.8)},${cp1y - (Math.sin(a2)*r*0.8)} ${cx},${cy}" fill="none" stroke="#e8c96a" stroke-width="0.8" opacity="0.7"/>`;
  }
  // Inner ring
  for (let i = 0; i < petals; i++) {
    const a = (i / petals) * Math.PI * 2 + Math.PI / petals;
    const px = cx + Math.cos(a) * r * 0.5;
    const py = cy + Math.sin(a) * r * 0.5;
    const a2 = a + Math.PI / petals;
    const cp1x = cx + Math.cos(a) * r * 0.25 + Math.cos(a2) * r * 0.2;
    const cp1y = cy + Math.sin(a) * r * 0.25 + Math.sin(a2) * r * 0.2;
    paths += `<path d="M${cx},${cy} Q${cp1x},${cp1y} ${px},${py} Q${cp1x - (Math.cos(a2)*r*0.4)},${cp1y - (Math.sin(a2)*r*0.4)} ${cx},${cy}" fill="rgba(201,168,76,0.15)" stroke="#c9a84c" stroke-width="0.6" opacity="0.8"/>`;
  }
  // Circles
  const circles = [r, r*0.72, r*0.42, r*0.18];
  const opacities = [0.4, 0.35, 0.5, 0.8];
  circles.forEach((rad, i) => {
    paths += `<circle cx="${cx}" cy="${cy}" r="${rad}" fill="none" stroke="#c9a84c" stroke-width="${i===3?1.2:0.6}" opacity="${opacities[i]}"/>`;
  });
  // Centre dot
  paths += `<circle cx="${cx}" cy="${cy}" r="3" fill="#c9a84c" opacity="0.9"/>`;
  // Radiating lines
  for (let i = 0; i < 16; i++) {
    const a = (i / 16) * Math.PI * 2;
    const x1 = cx + Math.cos(a) * r * 0.22;
    const y1 = cy + Math.sin(a) * r * 0.22;
    const x2 = cx + Math.cos(a) * r * 0.68;
    const y2 = cy + Math.sin(a) * r * 0.68;
    paths += `<line x1="${x1}" y1="${y1}" x2="${x2}" y2="${y2}" stroke="#c9a84c" stroke-width="0.4" opacity="0.3"/>`;
  }
  // Heart in centre
  paths += heartPath(cx, cy, 6, '#c9a84c', 0.9);
  return paths;
}

function heartPath(cx, cy, size, color, opacity) {
  const s = size;
  return `<path d="M${cx},${cy+s*0.35} C${cx},${cy} ${cx-s},${cy} ${cx-s},${cy-s*0.3} C${cx-s},${cy-s*0.8} ${cx},${cy-s*0.9} ${cx},${cy-s*0.5} C${cx},${cy-s*0.9} ${cx+s},${cy-s*0.8} ${cx+s},${cy-s*0.3} C${cx+s},${cy} ${cx},${cy} ${cx},${cy+s*0.35}Z" fill="${color}" opacity="${opacity}"/>`;
}

function cornerFloral(cx, cy, r, flipX = false, flipY = false) {
  const sx = flipX ? -1 : 1;
  const sy = flipY ? -1 : 1;
  let g = `<g transform="translate(${cx},${cy}) scale(${sx},${sy})">`;
  // Petal cross
  const dirs = [[0,-1],[1,0],[0,1],[-1,0]];
  dirs.forEach(([dx,dy]) => {
    g += `<ellipse cx="${dx*r*0.55}" cy="${dy*r*0.55}" rx="${r*0.3}" ry="${r*0.5}" transform="rotate(${Math.atan2(dy,dx)*180/Math.PI},${dx*r*0.55},${dy*r*0.55})" fill="rgba(192,84,110,0.3)" stroke="#e8758a" stroke-width="0.6" opacity="0.7"/>`;
  });
  // Diagonal leaves
  const diags = [[1,-1],[1,1],[-1,1],[-1,-1]];
  diags.forEach(([dx,dy]) => {
    g += `<ellipse cx="${dx*r*0.4}" cy="${dy*r*0.4}" rx="${r*0.18}" ry="${r*0.35}" transform="rotate(${Math.atan2(dy,dx)*180/Math.PI+45},${dx*r*0.4},${dy*r*0.4})" fill="none" stroke="#c9a84c" stroke-width="0.5" opacity="0.5"/>`;
  });
  g += `<circle cx="0" cy="0" r="${r*0.18}" fill="#c9a84c" opacity="0.6"/>`;
  g += `</g>`;
  return g;
}

// ─── Build Deck ───────────────────────────────────────────────────────────────
function buildDeck() {
  deck = [...messages].sort(() => Math.random() - 0.5);
  dealtCards = [];
  renderDeckStack();
  const grid = document.getElementById('cardsGrid');
  grid.innerHTML = '';
  document.getElementById('instruction').style.display = 'none';
  document.getElementById('deckLabel').textContent = `${deck.length} cards remaining — click to draw`;
}

function renderDeckStack() {
  const stack = document.getElementById('deckStack');
  const count = deck.length;
  if (count === 0) {
    stack.innerHTML = `<div style="width:140px;height:196px;display:flex;align-items:center;justify-content:center;color:rgba(201,168,76,0.4);font-size:0.8rem;letter-spacing:0.15em;text-transform:uppercase;font-family:'Cormorant Garamond',serif;font-style:italic;">deck empty</div>`;
    document.getElementById('deckLabel').textContent = 'all cards drawn ♥';
    return;
  }
  stack.innerHTML = '';
  const show = Math.min(count, 3);
  for (let i = 0; i < show; i++) {
    const div = document.createElement('div');
    div.className = 'stack-card card-back';
    div.innerHTML = cardBackSVG(140);
    stack.appendChild(div);
  }
  document.getElementById('deckLabel').textContent = `${count} card${count !== 1 ? 's' : ''} remaining`;
}

// ─── Deal a Card ──────────────────────────────────────────────────────────────
function dealCard() {
  if (deck.length === 0) return;
  const card = deck.pop();
  dealtCards.push(card);
  renderDeckStack();
  addCardToGrid(card, dealtCards.length - 1);
  document.getElementById('instruction').style.display = 'block';
}

function addCardToGrid(card, index) {
  const grid = document.getElementById('cardsGrid');
  const scene = document.createElement('div');
  scene.className = 'card-scene deal-in';
  scene.style.animationDelay = '0ms';

  const flip = document.createElement('div');
  flip.className = 'card-flip';

  // Back face
  const back = document.createElement('div');
  back.className = 'card-face back';
  back.innerHTML = cardBackSVG(160);

  // Front face
  const front = document.createElement('div');
  front.className = 'card-face front';
  front.innerHTML = `
    <span class="card-number top-left" style="color:${card.color}">${card.label}</span>
    <div class="card-suit" style="color:${card.color}">${card.suit}</div>
    <p class="card-message">${card.message}</p>
    <span class="card-number bottom-right" style="color:${card.color}">${card.label}</span>
  `;

  flip.appendChild(back);
  flip.appendChild(front);
  scene.appendChild(flip);
  grid.appendChild(scene);

  // Click to flip
  scene.addEventListener('click', () => {
    flip.classList.toggle('flipped');
    scene.classList.toggle('is-flipped');
  });

  // Remove deal-in class after animation
  setTimeout(() => scene.classList.remove('deal-in'), 600);
}

// ─── Shuffle ──────────────────────────────────────────────────────────────────
function shuffle() {
  const btn = document.getElementById('shuffleBtn');
  btn.classList.add('animating');
  setTimeout(() => btn.classList.remove('animating'), 500);
  buildDeck();
}

// ─── Init ─────────────────────────────────────────────────────────────────────
buildDeck();
</script>
</body>
</html>
