<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>A Little Deck for You ♥</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400;1,600&family=IM+Fell+English:ital@0;1&display=swap');

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      min-height:100vh;
      background:#1a0f2e;
      background-image:
        radial-gradient(ellipse at 20% 20%, rgba(45,27,61,0.9) 0%, transparent 55%),
        radial-gradient(ellipse at 80% 80%, rgba(30,58,95,0.7) 0%, transparent 55%);
      font-family:'Cormorant Garamond',serif;
      display:flex; flex-direction:column; align-items:center;
      padding:40px 20px 60px; overflow-x:hidden;
    }

    /* ── Header ── */
    .header { text-align:center; margin-bottom:46px; }
    .header h1 {
      font-family:'IM Fell English',serif;
      font-size:clamp(2rem,5vw,3.2rem);
      color:#e8c96a; letter-spacing:0.05em;
      text-shadow:0 0 30px rgba(201,168,76,0.4);
      margin-bottom:6px;
    }
    .header p { font-size:1.1rem; color:rgba(245,230,184,0.55); font-style:italic; letter-spacing:0.08em; }
    .ornament { color:#c9a84c; font-size:1.3rem; letter-spacing:0.3em; margin:8px 0; opacity:0.65; }

    /* ── Shuffle button ── */
    .shuffle-btn {
      position:relative; background:transparent;
      border:2px solid #c9a84c; color:#e8c96a;
      font-family:'Cormorant Garamond',serif; font-size:1.1rem;
      letter-spacing:0.22em; text-transform:uppercase;
      padding:14px 46px; cursor:pointer; margin-bottom:46px;
      transition:background 0.3s, box-shadow 0.3s, color 0.3s;
    }
    .shuffle-btn:hover {
      background:rgba(201,168,76,0.1);
      box-shadow:0 0 22px rgba(201,168,76,0.3);
      color:#f5e6b8;
    }
    .shuffle-btn:disabled { opacity:0.45; cursor:not-allowed; }
    .c { position:absolute; width:8px; height:8px; border-color:#c9a84c; border-style:solid; opacity:0.6; }
    .tl2{top:4px;left:4px;border-width:1px 0 0 1px}
    .tr2{top:4px;right:4px;border-width:1px 1px 0 0}
    .bl2{bottom:4px;left:4px;border-width:0 0 1px 1px}
    .br2{bottom:4px;right:4px;border-width:0 1px 1px 0}

    /* ── Deck area ── */
    .deck-area {
      display:flex; flex-direction:column; align-items:center;
      gap:36px; width:100%; max-width:900px;
    }
    .deck-label { font-size:0.82rem; letter-spacing:0.25em; text-transform:uppercase; color:rgba(245, 230, 184, 0.85); }

    /* ── Stack ── */
    .deck-stack { position:relative; width:140px; height:196px; cursor:pointer; }
    .deck-stack:not(.shuffling):hover .stack-card:last-child {
      transform:translateY(-10px) !important;
      box-shadow:0 22px 48px rgba(0,0,0,0.35), 0 0 28px rgba(201,168,76,0.2) !important;
    }
    .stack-card {
      position:absolute; width:140px; height:196px;
      border-radius:10px; background:#fefcf5;
      border:1.5px solid #c9a84c;
      box-shadow:0 4px 16px rgba(0,0,0,0.22);
      overflow:hidden;
      transition:transform 0.3s ease, box-shadow 0.3s ease;
    }
    .stack-card:nth-child(1) { transform:rotate(-3deg) translate(-3px,3px); }
    .stack-card:nth-child(2) { transform:rotate(-1.5deg) translate(-1px,1.5px); }
    .stack-card:nth-child(3) { transform:rotate(0deg); }
    .stack-card svg { width:100%; height:100%; }

    /* ── Shuffle fan animation ── */
    @keyframes fanLeft {
      0%   { transform:rotate(-3deg) translate(-3px,3px); }
      40%  { transform:rotate(-34deg) translate(-62px,6px); }
      60%  { transform:rotate(-34deg) translate(-62px,6px); }
      100% { transform:rotate(-3deg) translate(-3px,3px); }
    }
    @keyframes fanUp {
      0%   { transform:rotate(-1.5deg) translate(-1px,1.5px); }
      40%  { transform:rotate(-1.5deg) translate(0,-30px); }
      60%  { transform:rotate(-1.5deg) translate(0,-30px); }
      100% { transform:rotate(-1.5deg) translate(-1px,1.5px); }
    }
    @keyframes fanRight {
      0%   { transform:rotate(0deg); }
      40%  { transform:rotate(32deg) translate(60px,6px); }
      60%  { transform:rotate(32deg) translate(60px,6px); }
      100% { transform:rotate(0deg); }
    }
    .deck-stack.shuffling .stack-card:nth-child(1) { animation:fanLeft  0.85s cubic-bezier(0.4,0,0.2,1) forwards; }
    .deck-stack.shuffling .stack-card:nth-child(2) { animation:fanUp    0.85s cubic-bezier(0.4,0,0.2,1) forwards; }
    .deck-stack.shuffling .stack-card:nth-child(3) { animation:fanRight 0.85s cubic-bezier(0.4,0,0.2,1) forwards; }

    /* ── Cards grid ── */
    .cards-grid { display:flex; flex-wrap:wrap; gap:20px; justify-content:center; width:100%; }

    /* ── Card flip ── */
    .card-scene { width:160px; height:224px; perspective:900px; }
    .card-flip {
      position:relative; width:100%; height:100%;
      transform-style:preserve-3d;
      transition:transform 0.7s cubic-bezier(0.4,0,0.2,1);
      cursor:pointer;
    }
    .card-flip.flipped { transform:rotateY(180deg); }
    .card-face {
      position:absolute; inset:0;
      backface-visibility:hidden; border-radius:12px; overflow:hidden;
    }

    /* Back face */
    .card-face.back {
      background:#fefcf5;
      border:1.5px solid #c9a84c;
      box-shadow:0 8px 28px rgba(0,0,0,0.28), 0 2px 6px rgba(0,0,0,0.15);
    }
    .card-face.back svg { width:100%; height:100%; }

    /* Front face */
    .card-face.front {
      transform:rotateY(180deg);
      background:#fefcf5;
      border:1.5px solid #c9a84c;
      box-shadow:0 8px 28px rgba(0,0,0,0.28);
      display:flex; flex-direction:column;
      align-items:center; justify-content:center;
      padding:20px 14px; text-align:center;
    }
    .card-face.front::before {
      content:''; position:absolute; inset:8px;
      border:1px solid rgba(201,168,76,0.35);
      border-radius:8px; pointer-events:none;
    }
    .card-suit { font-size:2.4rem; line-height:1; margin-bottom:10px; color:#c9a84c; }
    .card-message { font-size:0.8rem; line-height:1.65; color:#7a5818; font-style:italic; }
    .card-num {
      position:absolute; font-size:0.78rem; font-weight:600;
      color:#c9a84c; font-family:'IM Fell English',serif; letter-spacing:0.04em;
    }
    .card-num.tl { top:9px; left:11px; }
    .card-num.br { bottom:9px; right:11px; transform:rotate(180deg); }

    /* Deal-in animation */
    .card-scene.deal-in { animation:dealIn 0.45s cubic-bezier(0.2,0.8,0.3,1) both; }
    @keyframes dealIn {
      from { opacity:0; transform:scale(0.72) translateY(28px); }
      to   { opacity:1; transform:scale(1) translateY(0); }
    }
    .card-scene:not(.is-flipped):hover .card-flip { transform:translateY(-6px); }

    .instruction {
      font-size:0.82rem; color:rgba(245,230,184,0.38);
      letter-spacing:0.15em; text-align:center; font-style:italic; margin-top:-18px;
    }
    .footer { margin-top:55px; text-align:center; color:rgba(245, 230, 184, 0.85);; font-size:0.78rem; letter-spacing:0.2em; }
  </style>
</head>
<body>

<header class="header">
  <div class="ornament">✦ ✦ ✦</div>
  <h1>A Little Deck for You</h1>
  <p>shuffle &amp; draw a card</p>
  <div class="ornament">✦ ✦ ✦</div>
</header>

<button class="shuffle-btn" id="shuffleBtn" onclick="shuffle()">
  <span class="c tl2"></span><span class="c tr2"></span>
  <span class="c bl2"></span><span class="c br2"></span>
  ✦ Shuffle ✦
</button>

<div class="deck-area">
  <div class="deck-stack" id="deckStack" onclick="dealCard()"></div>
  <p class="deck-label" id="deckLabel">click the deck to draw</p>
  <div class="cards-grid" id="cardsGrid"></div>
  <p class="instruction" id="instruction" style="display:none">tap a card to read your message</p>
</div>

<footer class="footer">
  <div class="ornament" style="font-size:1rem">♥ ♦ ♣ ♠</div>
  <p style="margin-top:6px">made with love, just for you</p>
</footer>

<script>
const messages = [
  { suit:'♥', label:'A♥',  msg:'were you lucky? or did you just choose well?' },
  { suit:'♦', label:'2♦',  msg:'if love was a single poem your name would be its only word' },
  { suit:'♥', label:'3♥',  msg:'let all that you do be done in love' },
  { suit:'♣', label:'4♣',  msg:'microdosing heaven by looking into your eyes' },
  { suit:'♠', label:'5♠',  msg:'I have two luxuries to brood over in my walks; your loveliness and the hour of my death - Keats' },
  { suit:'♥', label:'6♥',  msg:'I define love by thinking of you' },
  { suit:'♦', label:'7♦',  msg:'you are the knife I turn inside myself; this is love - Kafka' },
  { suit:'♣', label:'8♣',  msg:'you are my favourite person to do absolutely nothing and absolutely everything with.' },
  { suit:'♠', label:'9♠',  msg:'find both love and friendship in the same person >>>' },
  { suit:'♥', label:'10♥', msg:'if nothing saves us from death, at least love should save us from life - Neruda' },
  { suit:'♦', label:'J♦',  msg:'to love someone means to see them as God intended - Dostoevsky' },
  { suit:'♣', label:'Q♣',  msg:'now, I demand a love that is stupid and beautiful, like a pilot turning off her engines mid-flight to listen for rain on wings - Lewis' },
  { suit:'♠', label:'K♠',  msg:'there is no safe investment. to love at all is to be vulnerable - C.S. Lewis' },
];

let deck = [], dealtCards = [], uid = 0;

// ── Swan card back SVG ────────────────────────────────────────────────────────
function cardBackSVG() {
  return `
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 196" preserveAspectRatio="none">
      <!-- soft paper tint -->
      <rect x="0" y="0" width="140" height="196" fill="#fefcf5"/>

      <!-- inner border -->
      <rect x="10" y="10" width="120" height="176" rx="10" fill="none" stroke="rgba(201,168,76,0.45)" stroke-width="1"/>

      <!-- ornate corners -->
      <path d="M18 26c8-8 18-8 26 0" fill="none" stroke="rgba(201,168,76,0.55)" stroke-width="1"/>
      <path d="M122 26c-8-8-18-8-26 0" fill="none" stroke="rgba(201,168,76,0.55)" stroke-width="1"/>
      <path d="M18 170c8 8 18 8 26 0" fill="none" stroke="rgba(201,168,76,0.55)" stroke-width="1"/>
      <path d="M122 170c-8 8-18 8-26 0" fill="none" stroke="rgba(201,168,76,0.55)" stroke-width="1"/>

      <!-- center heart -->
      <g transform="translate(70 98)">
        <path
          d="M0 30
             C -22 10, -40 -6, -28 -22
             C -18 -35,  -2 -30, 0 -18
             C  2 -30,  18 -35, 28 -22
             C  40 -6,  22 10, 0 30 Z"
          fill="#c9a84c"
          opacity="0.95"
        />
        <!-- subtle glow -->
        <path
          d="M0 30
             C -22 10, -40 -6, -28 -22
             C -18 -35,  -2 -30, 0 -18
             C  2 -30,  18 -35, 28 -22
             C  40 -6,  22 10, 0 30 Z"
          fill="none"
          stroke="rgba(201,168,76,0.45)"
          stroke-width="4"
          opacity="0.35"
        />
      </g>

      <!-- tiny suit marks -->
      <text x="18" y="28" font-family="IM Fell English, serif" font-size="14" fill="#c9a84c" opacity="0.7">♥</text>
      <text x="122" y="182" font-family="IM Fell English, serif" font-size="14" fill="#c9a84c" opacity="0.7" text-anchor="end">♥</text>
    </svg>
  `;
}
 

// ── Deck management ───────────────────────────────────────────────────────────
function buildDeck() {
  deck = [...messages].sort(() => Math.random() - 0.5);
  dealtCards = [];
  renderStack();
  document.getElementById('cardsGrid').innerHTML = '';
  document.getElementById('instruction').style.display = 'none';
}

function renderStack() {
  const stack = document.getElementById('deckStack');
  const n = deck.length;
  if (!n) {
    stack.innerHTML = `<div style="width:140px;height:196px;display:flex;align-items:center;justify-content:center;color:rgba(201,168,76,0.4);font-size:0.78rem;letter-spacing:0.14em;text-transform:uppercase;font-family:'Cormorant Garamond',serif;font-style:italic;">deck empty</div>`;
    document.getElementById('deckLabel').textContent = 'all cards drawn ♥';
    return;
  }
  stack.innerHTML = '';
  for (let i = 0; i < Math.min(n, 3); i++) {
    const d = document.createElement('div');
    d.className = 'stack-card';
    d.innerHTML = cardBackSVG();
    stack.appendChild(d);
  }
  document.getElementById('deckLabel').textContent = `${n} card${n !== 1 ? 's' : ''} remaining`;
}

function dealCard() {
  if (!deck.length) return;
  const card = deck.pop();
  dealtCards.push(card);
  renderStack();
  addCardToGrid(card);
  document.getElementById('instruction').style.display = 'block';
}

function addCardToGrid(card) {
  const grid = document.getElementById('cardsGrid');

  const scene = document.createElement('div');
  scene.className = 'card-scene deal-in';

  const flip = document.createElement('div');
  flip.className = 'card-flip';

  const back = document.createElement('div');
  back.className = 'card-face back';
  back.innerHTML = cardBackSVG();

  const front = document.createElement('div');
  front.className = 'card-face front';
  front.innerHTML = `
    <span class="card-num tl">${card.label}</span>
    <div class="card-suit">${card.suit}</div>
    <p class="card-message">${card.msg}</p>
    <span class="card-num br">${card.label}</span>
  `;

  flip.append(back, front);
  scene.appendChild(flip);
  grid.appendChild(scene);

  scene.addEventListener('click', () => {
    flip.classList.toggle('flipped');
    scene.classList.toggle('is-flipped');
  });

  setTimeout(() => scene.classList.remove('deal-in'), 500);
}

// ── Shuffle ───────────────────────────────────────────────────────────────────
function shuffle() {
  const btn = document.getElementById('shuffleBtn');
  const stack = document.getElementById('deckStack');
  if (btn.disabled) return;
  btn.disabled = true;

  if (deck.length > 0) {
    stack.classList.add('shuffling');
    setTimeout(() => {
      stack.classList.remove('shuffling');
      buildDeck();
      btn.disabled = false;
    }, 900);
  } else {
    buildDeck();
    btn.disabled = false;
  }
}

// ── Init ─────────────────────────────────────────────────────────────────────
buildDeck();
</script>
</body>
</html>
